/*! revealjs - v0.1.0 - 2016-10-23
* http://www.youtube.com/watch?v=cDuG95DXbw8
* Copyright (c) 2016 Obi-Wan Kenobi; Licensed  */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):a.revealjs=b()}(this,function(){"use strict";function a(a,b){function c(){return d.paused||d.ended||d.currentTime>=b.videoCutoff?(cancelAnimationFrame(s),b.videoCallback(k,l),!1):(v(),void(s=requestAnimationFrame(c)))}if("undefined"==typeof a)throw new Error("RevealJS needs a parent container to bind to.");var d,k,l,m,n,o,p,q;if(b=e(j,b),"string"==typeof a&&(a=document.getElementById(a)),d=f(a,"video"),!d)throw new Error("Video node must appear in parent container.");if(d.style.display="none",!b.videoSrc&&!f(d,"source"))throw new Error("Video node has no source.");if(b.videoSrc){var r=[].slice.call(d.getElementsByTagName("source"));r.forEach(function(a){a.remove()}),d.src=b.videoSrc}if(b.videoPlaybackRate&&(d.playbackRate=b.videoPlaybackRate),console.log(d.paused,d.ended),k=f(a,"img"),!k)throw new Error("Image node must appear in parent container.");h(k),b.imageSrc&&(k.src=b.imageSrc),b.crossOrigin&&(d.crossOrigin="anonymous",k.crossOrigin="anonymous"),l=g(),m=g(),n=g(),i(l.canvas),a.appendChild(l.canvas);var s,t=b.transparentColor.split(/[\(\)]+/)[1].split(",").map(Number),u=function(){b.transparent&&(m.context.fillStyle=b.transparentColor,m.context.fillRect(0,0,p,q)),m.context.drawImage(k,m.x.start,m.y.start,m.x.end,m.y.end)},v=function(){n.context.drawImage(d,n.x.start,n.y.start,n.x.end,n.y.end),u();for(var a=n.context.getImageData(0,0,p,q),c=a.data,e=m.context.getImageData(0,0,p,q),f=e.data,g=0,h=c.length;h>g;g+=4){var i=c[g],j=c[g+1],k=c[g+2];f[g+3]=x(i,j,k),b.transparent&&f[g]===t[0]&&f[g+1]===t[1]&&f[g+2]===t[2]&&(f[g+3]=0)}m.context.putImageData(e,0,0),l.context.clearRect(0,0,p,q),l.context.drawImage(m.canvas,0,0)},w=function(){o=a.getBoundingClientRect();var e=k.getBoundingClientRect();p=o.width,q=o.height,l.canvas.width=e.width,l.canvas.height=e.height,m.canvas.width=k.width,m.canvas.height=k.height,n.canvas.width=e.width*b.videoScale,n.canvas.height=e.height*b.videoScale;var f={start:-(n.canvas.width/2)+e.width/2,end:n.canvas.width},g={start:-(n.canvas.height/2)+e.height/2,end:n.canvas.height};n.setX(f.start,f.end),n.setY(g.start,g.end),m.setX(0,e.width),m.setY(0,e.height),d.paused||d.ended||c()},x=function(a,b,c){return 3*a+4*b+c>>>3},y=function(){(d.paused||d.ended)&&(d.currentTime=0,d.play())},z=function(){"undefined"==typeof b.videoCutoff&&(b.videoCutoff=d.duration-.5),s||c(),d.removeEventListener("play",z)},A=function(){console.log("canplay")};return d.addEventListener("play",z),d.addEventListener("canplay",A),k.complete?w():k.addEventListener("load",function(){w()}),y}for(var b=0,c=["webkit","moz"],d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=window.setTimeout(function(){a(d+e)},e);return b=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});var e=function(a,b){var c,d={};for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c]);return d},f=function(a,b){return a.getElementsByTagName(b)[0]},g=function(a,b){var c=document.createElement("canvas"),d=c.getContext("2d");return a&&b&&(c.width=a,c.height=b),{canvas:c,context:d,width:a,height:b,x:{start:void 0,end:void 0},y:{start:void 0,end:void 0},setX:function(a,b){this.x.start=a,this.x.end=b},setY:function(a,b){this.y.start=a,this.y.end=b}}},h=function(a){a.style.visibility="hidden",a.style.top="0",a.style.left="0",a.style.display="block",a.style.opacity="0",a.style.transition="opacity 750ms ease-in 250ms"},i=function(a){a.style.position="absolute",a.style.zIndex="10",a.style.top="0",a.style.left="0"},j={autoPlay:!0,timeout:250,videoSrc:void 0,imageSrc:void 0,crossOrigin:!1,videoPlaybackRate:1,videoCutoff:void 0,videoScale:1,transparentColor:"rgb(250,250,250)",transparent:!1,videoCallback:function(a,b){a.style.visibility="visible",a.style.opacity="1",a.addEventListener("transitionend",function(){b.context.clearRect(0,0,b.canvas.width,b.canvas.height)})}};return a});