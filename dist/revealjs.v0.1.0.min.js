/*! revealjs - v0.1.0 - 2016-10-20
* http://www.youtube.com/watch?v=cDuG95DXbw8
* Copyright (c) 2016 Obi-Wan Kenobi; Licensed  */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):a.revealjs=b()}(this,function(){"use strict";function a(a,j){if("undefined"==typeof a)throw new Error("RevealJS needs a parent container to bind to.");var k,l,m,n,o,p,q,r,s;if(j=d(i,j),"string"==typeof a&&(a=document.getElementById(a)),k=e(a,"video"),!k)throw new Error("Video node must appear in parent container.");if(k.style.display="none",!j.videoSrc&&!e(k,"source"))throw new Error("Video node has no source.");if(j.videoSrc){var t=[].slice.call(k.getElementsByTagName("source"));t.forEach(function(a){a.remove()}),k.src=j.videoSrc}if(j.videoPlaybackRate&&(k.playbackRate=j.videoPlaybackRate),l=e(a,"img"),!l)throw new Error("Image node must appear in parent container.");g(l),j.imageSrc&&(l.src=j.imageSrc),j.crossOrigin&&(k.crossOrigin="anonymous",l.crossOrigin="anonymous"),m=l.cloneNode(!0),n=f(),o=f(),p=f(),h(n.canvas),a.appendChild(n.canvas);var u,v=function(){if("undefined"==typeof j.videoCutoff&&(j.videoCutoff=k.duration-.5),k.paused||k.ended||k.currentTime>=j.videoCutoff)return c(u),j.videoCallback(l,n),!1;p.context.clearRect(0,0,p.width,p.height),p.context.drawImage(k,p.x.start,p.y.start,p.x.end,p.y.end),j.transparent&&(o.context.fillStyle=j.transparentColor,o.context.fillRect(0,0,r,s)),o.context.drawImage(m,o.x.start,o.y.start,o.x.end,o.y.end);for(var a=p.context.getImageData(0,0,r,s),d=a.data,e=o.context.getImageData(0,0,r,s),f=e.data,g=0;g<d.length;g+=4){var h=d[g],i=d[g+1],q=d[g+2];if(f[g+3]=x(h,i,q),j.transparent){var t="rgb("+f[g]+","+f[g+1]+","+f[g+2]+")";t===j.transparentColor&&(f[g+3]=0)}}e.data.set(f),o.context.putImageData(e,0,0),n.context.clearRect(0,0,r,s),n.context.drawImage(o.canvas,0,0),b(v)},w=function(){q=a.getBoundingClientRect();var b=l.getBoundingClientRect();r=q.width,s=q.height,console.log(b),n.canvas.width=r,n.canvas.height=s,o.canvas.width=l.width,o.canvas.height=l.height,p.canvas.width=1*l.width,p.canvas.height=1*l.height;var c={start:-(p.canvas.width/2)+b.width/2,end:p.canvas.width},d={start:-(p.canvas.height/2)+b.height/2,end:p.canvas.height};p.setX(c.start,c.end),p.setY(d.start,d.end),o.setX(b.left,b.right),o.setY(b.top,b.height),j.autoPlay&&setTimeout(function(){y()},j.timeout)},x=function(a,b,c){return Math.round(.21*a+.72*b+.07*c)},y=function(){(k.paused||k.ended)&&(k.currentTime=0,k.play())};return k.addEventListener("play",function(){b(v)}),m.complete?w():m.addEventListener("load",function(){w()}),y}var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,c=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame,d=function(a,b){var c,d={};for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c]);return d},e=function(a,b){return a.getElementsByTagName(b)[0]},f=function(a,b){var c=document.createElement("canvas"),d=c.getContext("2d");return a&&b&&(c.width=a,c.height=b),{canvas:c,context:d,width:a,height:b,x:{start:void 0,end:void 0},y:{start:void 0,end:void 0},setX:function(a,b){this.x.start=a,this.x.end=b},setY:function(a,b){this.y.start=a,this.y.end=b}}},g=function(a){a.style.visibility="hidden",a.style.top="0",a.style.left="0",a.style.display="block",a.style.opacity="0",a.style.transition="opacity 750ms ease-in 250ms"},h=function(a){a.style.position="absolute",a.style.zIndex="10",a.style.top="0",a.style.left="0"},i={autoPlay:!0,timeout:250,videoSrc:void 0,imageSrc:void 0,crossOrigin:!1,videoPlaybackRate:1,videoCutoff:void 0,transparentColor:"rgb(250,250,250)",transparent:!1,videoCallback:function(a,b){a.style.visibility="visible",a.style.opacity="1",a.addEventListener("transitionend",function(){b.context.clearRect(0,0,b.canvas.width,b.canvas.height)})}};return a});